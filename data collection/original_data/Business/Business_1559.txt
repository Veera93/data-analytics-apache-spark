 Petróleo Brasileiro, Brazil’s state-controlled oil company, said on Wednesday that it had agreed to pay $2.95 billion to settle a shareholder lawsuit in the United States over a corruption scandal that has ensnared dozens of politicians and corporate executives, including two former Brazilian presidents. Prosecutors, in a long-running investigation known as Operation Carwash, have claimed that a small number of top officials at the company, known as Petrobras, conspired with a group of other companies to overcharge Petrobras for construction and service work, receiving bribes in return. The ensuing scandal and vast investigation has implicated dozens of high-level figures like former President Luiz Inácio Lula da Silva and his successor, Dilma Rousseff. Corruption allegations have also dogged the current president, Michel Temer, and several of his close allies. Petrobras officials believe nearly $3 billion in bribes were paid as part of the scheme, which allegedly included gifts of Rolex watches, $3,000 bottles of wine, yachts, helicopters and prostitutes. The company said on Monday that it was a victim of the bribery scheme and had already recovered 1.475 billion Brazilian reais, or about $449 million, in restitution. Petrobras said it would “continue to pursue all available legal remedies from culpable companies and individuals.” “The agreement is in the company’s best interest and that of its shareholders, given the risks of a verdict advised by a jury, particularities of U.S. procedure and securities laws, as well its assessment of the status of the class action and the nature of such litigation in the United States,” Petrobras said in a filing with the Securities and Exchange Commission on Wednesday. The company said that it would pay the settlement in three installments, but would recognize the total settlement as part of its fourth-quarter 2017 results. It said that the settlement did not constitute an admission of wrongdoing or misconduct and that it “expressly denies liability” in the agreement. The deal would resolve all pending and prospective claims by purchasers of Petrobras securities in the United States and by purchasers of Petrobras securities that are listed for trading in the United States, the company said. The settlement still has to be approved by the United States District Court for the Southern District of New York. In a statement, the lead counsel for the plaintiffs in the class-action lawsuit said it was “very pleased with this historic settlement.” “Simply put, this litigation and its ultimate resolution have yielded an excellent result for the class,” said Jeremy Lieberman, comanaging partner of the law firm Pomerantz. Under the chief executive Pedro Parente, a former chief executive of the commodities trading firm Bunge Brasil, Petrobras has tried to clean up its image in the aftermath of the scandal. The country has been a rising petroleum power with oil output averaging about 2.6 million barrels a day late last year, comparable to key OPEC producers like Kuwait and the United Arab Emirates. Before the scandal and the fall in oil prices that began in 2014, Petrobras had assumed a dominant position in Brazil’s energy development, limiting the role of international companies. But the corruption scandal, coupled with lower oil prices that strained Brazil’s resources, have prompted a change in thinking. Although prices have risen sharply in recent months, to about $67 a barrel for Brent crude, both Brazil and Petrobras are now more open to working with international oil companies. Petrobras has sold stakes in major Brazilian fields and is looking to shed international holdings. Last year for instance, Total of France bought a stake in the Iara and Lapa fields and other assets for $2.2 billion. In December, Norway’s Statoil agreed to pay as much as $2.9 billion for a stake in another Petrobras field called Roncador. And Petrobras said in November that it was putting stakes in two producing fields off Nigeria on the sales block.